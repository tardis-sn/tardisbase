
<!DOCTYPE html>


<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>tardisbase.testing.regression_comparison.visualization module &#8212; tardisbase 0.1.dev1+g65aa1bf.d20250728 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <script src="../_static/documentation_options.js?v=010c69fa"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="tardisbase.testing.regression_comparison.visualize_files module" href="tardisbase.testing.regression_comparison.visualize_files.html" />
    <link rel="prev" title="tardisbase.testing.regression_comparison.util module" href="tardisbase.testing.regression_comparison.util.html" />
    <link href="../_static/tardis.css" rel="stylesheet" type="text/css">

  </head><body>
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-53HJHD1BWS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-53HJHD1BWS');
  </script>
  <a href="http://github.com/tardis-sn/tardis"><img style="position: fixed; top: 0px; right: 0; border: 0; z-index: 100000;image-orientation: 90deg;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png" alt="Fork me on GitHub"/></a>

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-tardisbase.testing.regression_comparison.visualization">
<span id="tardisbase-testing-regression-comparison-visualization-module"></span><h1>tardisbase.testing.regression_comparison.visualization module<a class="headerlink" href="#module-tardisbase.testing.regression_comparison.visualization" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="tardisbase.testing.regression_comparison.visualization.SpectrumSolverComparator">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tardisbase.testing.regression_comparison.visualization.</span></span><span class="sig-name descname"><span class="pre">SpectrumSolverComparator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref1_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref2_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tardisbase/testing/regression_comparison/visualization.html#SpectrumSolverComparator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tardisbase.testing.regression_comparison.visualization.SpectrumSolverComparator" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A class for comparing and visualizing spectrum solver data between two regression datasets.</p>
<p>This class provides visualization capabilities for spectrum solver analysis,
generating both matplotlib and Plotly plots that show luminosity comparisons and
fractional residuals between two reference datasets. It supports multiple spectrum
types including integrated, real packets, reabsorbed packets, and virtual packets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ref1_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><em>Path</em>) – Path to the first reference HDF5 file containing spectrum solver data.
This file should contain the expected spectrum solver data structure.</p></li>
<li><p><strong>ref2_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><em>Path</em>) – Path to the second reference HDF5 file containing spectrum solver data.
This file should have the same structure as ref1_path for comparison.</p></li>
<li><p><strong>plot_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Path</em><em>, or </em><em>None</em><em>, </em><em>optional</em>) – Directory path where plots should be saved when SAVE_COMP_IMG environment
variable is set to ‘1’, by default None. If None, plots are displayed
but not saved to disk.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The class expects HDF5 files with spectrum solver data stored under the path:
‘simulation/spectrum_solver/{spectrum_type}/{wavelength|luminosity}’</p>
<p>Each spectrum type should contain both wavelength and luminosity datasets
as 1D arrays of the same length.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tardisbase.testing.regression_comparison.visualization.SpectrumSolverComparator.plot_matplotlib">
<span class="sig-name descname"><span class="pre">plot_matplotlib</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tardisbase/testing/regression_comparison/visualization.html#SpectrumSolverComparator.plot_matplotlib"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tardisbase.testing.regression_comparison.visualization.SpectrumSolverComparator.plot_matplotlib" title="Link to this definition">¶</a></dt>
<dd><p>Generate comprehensive matplotlib plots comparing spectrum solver data.</p>
<p>This method creates a 4x2 grid of subplots showing luminosity comparisons
and fractional residuals for each spectrum type. Each spectrum type gets
two vertically stacked subplots: luminosity comparison (top) and fractional
residuals (bottom).</p>
<p class="rubric">Notes</p>
<p>Plot structure:
- Figure size: 20x20 inches for high-resolution output
- Grid layout: 4 rows × 2 columns with height ratios [3,1,3,1]
- Top subplots: Luminosity vs wavelength for both references
- Bottom subplots: Fractional residuals (Ref2-Ref1)/Ref1 vs wavelength</p>
<p>Visualization features:
- Ref1 data: solid lines
- Ref2 data: dashed lines
- Residuals: purple lines with horizontal zero-reference line
- Grid lines and legends for clarity
- Shared x-axes between luminosity and residual plots</p>
<p>Fractional residuals calculation:
residuals = (luminosity_ref2 - luminosity_ref1) / luminosity_ref1</p>
<p>Division by zero is handled by setting residuals to 0 where luminosity_ref1 = 0.</p>
<p>File saving:
If environment variable SAVE_COMP_IMG=’1’ and plot_dir is specified,
saves high-resolution PNG (300 DPI) to plot_dir/spectrum.png.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tardisbase.testing.regression_comparison.visualization.SpectrumSolverComparator.plot_plotly">
<span class="sig-name descname"><span class="pre">plot_plotly</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tardisbase/testing/regression_comparison/visualization.html#SpectrumSolverComparator.plot_plotly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tardisbase.testing.regression_comparison.visualization.SpectrumSolverComparator.plot_plotly" title="Link to this definition">¶</a></dt>
<dd><p>Generate interactive Plotly plots for spectrum solver data comparison.</p>
<p>This method creates an interactive web-based visualization using Plotly
with the same data structure as the matplotlib version but with enhanced
interactivity, hover information, and modern styling.</p>
<p class="rubric">Notes</p>
<p>Plot configuration:
- Layout: 4 rows × 2 columns with height ratios [0.3, 0.15] repeated
- Total dimensions: 1200px width × 900px height
- Shared x-axes between luminosity and residual plots
- Reduced spacing for compact visualization</p>
<p>Visualization features:
- Interactive hover tooltips with data values
- Solid lines for Ref1, dashed lines for Ref2
- Purple residual lines with horizontal zero-reference lines
- Light blue background for enhanced readability
- Grid lines and consistent axis labeling</p>
<p>Subplot organization:
- Rows 1,3: Luminosity plots for spectrum types
- Rows 2,4: Corresponding fractional residual plots
- Column 1: spectrum_integrated, spectrum_real_packets_reabsorbed
- Column 2: spectrum_real_packets, spectrum_virtual_packets</p>
<p>Interactive features:
- Zoom and pan capabilities
- Legend toggling for hiding/showing traces
- Hover data inspection
- Export capabilities (PNG, SVG, PDF)</p>
<p>The plot automatically handles missing data gracefully and maintains
consistent axis ranges across related subplots for easy comparison.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tardisbase.testing.regression_comparison.visualization.SpectrumSolverComparator.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tardisbase/testing/regression_comparison/visualization.html#SpectrumSolverComparator.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tardisbase.testing.regression_comparison.visualization.SpectrumSolverComparator.setup" title="Link to this definition">¶</a></dt>
<dd><p>Load spectrum solver data from both reference HDF5 files.</p>
<p>This method reads wavelength and luminosity data for all spectrum types
from both reference files and stores them in the internal data structure.
It handles missing files and keys with warning messages.</p>
<p class="rubric">Notes</p>
<p>The method populates self.data with the following structure:
data[‘Ref1’|’Ref2’][spectrum_key][‘wavelength’|’luminosity’] = numpy.ndarray</p>
<p>For each spectrum type, the method expects to find:
- simulation/spectrum_solver/{spectrum_type}/wavelength
- simulation/spectrum_solver/{spectrum_type}/luminosity</p>
<p>Error handling includes:
- FileNotFoundError: Warns if HDF5 files are missing
- KeyError: Warns if expected spectrum data keys are not found</p>
<p>After successful execution, all data is available as NumPy arrays
for plotting and analysis operations.</p>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">tardisbase</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compare_commits.html">Visualizing File Changes Across Commits</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="tardisbase.html">tardisbase package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">tardisbase</a><ul>
  <li><a href="tardisbase.html">tardisbase package</a><ul>
  <li><a href="tardisbase.testing.html">tardisbase.testing package</a><ul>
  <li><a href="tardisbase.testing.regression_comparison.html">tardisbase.testing.regression_comparison package</a><ul>
      <li>Previous: <a href="tardisbase.testing.regression_comparison.util.html" title="previous chapter">tardisbase.testing.regression_comparison.util module</a></li>
      <li>Next: <a href="tardisbase.testing.regression_comparison.visualize_files.html" title="next chapter">tardisbase.testing.regression_comparison.visualize_files module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, TARDIS Collaboration.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/api/tardisbase.testing.regression_comparison.visualization.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>